<!-- Flashcard -->
<div th:fragment="flashcardItem(card)">
    <div class="flashcard shadow-lg rounded-4 position-relative" onmouseenter="this.classList.add('hovered')"
        onmouseleave="this.classList.remove('hovered')" onclick="this.classList.toggle('flipped')">
        <div class="flashcard-inner position-relative">

            <!-- Thanh navbar nhỏ -->
            <div class="flashcard-toolbar position-absolute top-0 end-0 m-2 d-none"
                th:if="${session.loggedInUser != null && session.loggedInUser.id == card.deck.user.id}">
                <div class="btn-group-vertical">
                    <a class="btn btn-sm btn-outline-secondary" th:href="@{'/flashcards/edit/' + ${card.id}}"
                        onclick="event.stopPropagation();">
                        <i class="fas fa-edit"></i> Sửa
                    </a>
                    <form th:action="@{'/flashcards/delete/' + ${card.id}}" method="post"
                        onsubmit="event.stopPropagation(); return confirm('Bạn có chắc muốn xóa thẻ này?');">
                        <button type="submit" class="btn btn-sm btn-outline-danger">
                            <i class="fas fa-trash-alt"></i> Xoá
                        </button>
                    </form>
                </div>
            </div>

            <!-- Mặt trước -->
            <div class="flashcard-front p-4 bg-light rounded-4">
                <div th:if="${card.imageUrl != null}" class="mb-3 text-center">
                    <img th:src="@{${card.imageUrl}}" alt="Flashcard Image" class="img-fluid rounded"
                        style="max-height: 200px;" />
                </div>
                <h5 class="fw-bold text-center" th:text="${card.term}">Thuật ngữ</h5>
            </div>

            <!-- Mặt sau -->
            <div class="flashcard-back p-4 bg-white rounded-4">
                <p class="text-center" th:text="${card.definition}">Định nghĩa</p>
            </div>
        </div>
    </div>
</div>